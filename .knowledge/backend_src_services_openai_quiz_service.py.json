{"is_source_file": true, "format": "Python", "description": "This Python source file defines a service class 'OpenAIQuizGenerator' for generating quiz questions using OpenAI's API. It includes data classes for quiz data, configuration handling, prompt construction, API request logic, and response parsing. This service is intended for integration into a larger application that delivers quizzes based on lesson content.", "external_files": ["httpx"], "external_methods": ["httpx.AsyncClient.post", "httpx.AsyncClient.__aenter__", "httpx.AsyncClient.__aexit__"], "published": ["OpenAIQuizGenerator", "QuizQuestion", "GeneratedQuiz", "OpenAIConfigError"], "classes": [{"name": "QuizQuestion", "description": "Represents a single generated quiz question with question text, options, and the index of the correct answer."}, {"name": "GeneratedQuiz", "description": "Represents a set of quiz questions generated for a specific lesson, including metadata such as lesson ID, title, and passing score."}, {"name": "OpenAIConfigError", "description": "Custom exception indicating missing or invalid OpenAI configuration."}, {"name": "OpenAIQuizGenerator", "description": "Main class providing functionality for generating multiple-choice quizzes for lessons using OpenAI's API, managing prompt creation, API communication, and response parsing."}], "methods": [{"name": "__init__(self, api_key: Optional[str] = None, model: Optional[str] = None, timeout_seconds: Optional[float] = None)", "description": "Initializes the OpenAIQuizGenerator with API key, model, and timeout settings.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"name": "str _build_system_prompt(self)", "description": "Constructs the system prompt to instruct the model to generate JSON with quiz questions.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"name": "str _build_user_prompt(self, lesson_title: str, lesson_content: str, difficulty: str = \"Beginner\")", "description": "Creates the user prompt including lesson details and difficulty setting.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"name": "GeneratedQuiz generate_quiz(self, lesson_id: int, lesson_title: str, lesson_content: str, pass_score: float = 70.0, difficulty: str = \"Beginner\")", "description": "Asynchronously generates a quiz for a lesson by calling the OpenAI API and parsing the response.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}], "calls": ["httpx.AsyncClient.post"], "search-terms": ["openai", "quiz generator", "async", "JSON parsing", "lesson quiz", "prompt construction", "API communication"], "state": 2, "file_id": 43, "knowledge_revision": 132, "git_revision": "", "ctags": [{"_type": "tag", "name": "DEFAULT_MODEL", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^DEFAULT_MODEL = os.getenv(\"OPENAI_MODEL\", \"gpt-4o-mini\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DEFAULT_TIMEOUT", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^DEFAULT_TIMEOUT = float(os.getenv(\"OPENAI_TIMEOUT_SECONDS\", \"20\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "GeneratedQuiz", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class GeneratedQuiz:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpenAIConfigError", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class OpenAIConfigError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpenAIQuizGenerator", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class OpenAIQuizGenerator:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuizQuestion", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class QuizQuestion:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    def __init__(self, api_key: Optional[str] = None, model: Optional[str] = None, timeout_secon/", "language": "Python", "kind": "member", "signature": "(self, api_key: Optional[str] = None, model: Optional[str] = None, timeout_seconds: Optional[float] = None)", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "_build_system_prompt", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    def _build_system_prompt(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "_build_user_prompt", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    def _build_user_prompt(self, lesson_title: str, lesson_content: str, difficulty: str = \"Begi/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, lesson_title: str, lesson_content: str, difficulty: str = \"Beginner\")", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "generate_quiz", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    async def generate_quiz(self, lesson_id: int, lesson_title: str, lesson_content: str, pass_s/", "language": "Python", "typeref": "typename:GeneratedQuiz", "kind": "member", "signature": "(self, lesson_id: int, lesson_title: str, lesson_content: str, pass_score: float = 70.0, difficulty: str = \"Beginner\")", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "questions", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    questions: List[QuizQuestion] = field(default_factory=list)$/", "language": "Python", "typeref": "typename:List[QuizQuestion]", "kind": "variable", "scope": "GeneratedQuiz", "scopeKind": "class"}], "hash": "d47e7d4b472b5791f70204d520f5bc34", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/services/openai_quiz_service.py", "fields": [{"name": "DEFAULT_MODEL = os.getenv(\"OPENAI_MODEL\", \"gpt-4o-mini\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEFAULT_TIMEOUT = float(os.getenv(\"OPENAI_TIMEOUT_SECONDS\", \"20\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[QuizQuestion] questions", "scope": "GeneratedQuiz", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"132": ""}]}