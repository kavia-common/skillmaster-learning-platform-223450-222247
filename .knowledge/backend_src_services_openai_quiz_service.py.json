{"is_source_file": true, "format": "Python", "description": "This file defines a Python module for generating quiz questions using OpenAI's API. It includes data classes for quiz structure, a configuration class, and an asynchronous generator method that constructs prompts, calls the OpenAI API, and parses the JSON response to produce quiz questions.", "external_files": ["httpx"], "external_methods": ["httpx.AsyncClient", "httpx.TimeoutException", "httpx.HTTPStatusError"], "published": ["OpenAIQuizGenerator"], "classes": [{"name": "QuizQuestion", "description": "Represents a single generated quiz question with question text, options, and answer index."}, {"name": "GeneratedQuiz", "description": "Represents a set of quiz questions along with metadata such as lesson ID, title, and pass score."}, {"name": "OpenAIConfigError", "description": "Custom exception raised for configuration errors related to OpenAI."}, {"name": "OpenAIQuizGenerator", "description": "Main class for generating quizzes by interacting with OpenAI's chat completion API. Handles prompt creation, API requests, and response parsing."}], "methods": [{"name": "__init__(self, api_key: Optional[str] = None, model: Optional[str] = None, timeout_seconds: Optional[float] = None)", "description": "Initializes the quiz generator with API key, model, and timeout settings, raising error if API key is missing.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"name": "str _build_system_prompt(self)", "description": "Constructs the static system prompt used in the API call.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"name": "str _build_user_prompt(self, lesson_title: str, lesson_content: str, difficulty: str = \"Beginner\")", "description": "Constructs the user prompt for quiz generation based on lesson details.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"name": "GeneratedQuiz generate_quiz(self, lesson_id: int, lesson_title: str, lesson_content: str, pass_score: float = 70.0, difficulty: str = \"Beginner\")", "description": "Asynchronously calls OpenAI API to generate a quiz, parses the JSON response, and returns a GeneratedQuiz object.", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}], "calls": ["httpx.AsyncClient", "client.post", "resp.raise_for_status", "resp.json", "json.loads"], "search-terms": ["openai_quiz_service", "QuizQuestion", "GeneratedQuiz", "generate_quiz", "async", "prompt", "json parsing", "OpenAI API"], "state": 2, "file_id": 43, "knowledge_revision": 144, "git_revision": "962ba3a528b065ca22ab376c9c099363e2151844", "revision_history": [{"132": ""}, {"144": "962ba3a528b065ca22ab376c9c099363e2151844"}], "ctags": [{"_type": "tag", "name": "DEFAULT_MODEL", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^DEFAULT_MODEL = os.getenv(\"OPENAI_MODEL\", \"gpt-4o-mini\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DEFAULT_TIMEOUT", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^DEFAULT_TIMEOUT = float(os.getenv(\"OPENAI_TIMEOUT_SECONDS\", \"20\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "GeneratedQuiz", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class GeneratedQuiz:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpenAIConfigError", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class OpenAIConfigError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpenAIQuizGenerator", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class OpenAIQuizGenerator:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuizQuestion", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^class QuizQuestion:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    def __init__(self, api_key: Optional[str] = None, model: Optional[str] = None, timeout_secon/", "language": "Python", "kind": "member", "signature": "(self, api_key: Optional[str] = None, model: Optional[str] = None, timeout_seconds: Optional[float] = None)", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "_build_system_prompt", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    def _build_system_prompt(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "_build_user_prompt", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    def _build_user_prompt(self, lesson_title: str, lesson_content: str, difficulty: str = \"Begi/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, lesson_title: str, lesson_content: str, difficulty: str = \"Beginner\")", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "generate_quiz", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    async def generate_quiz(self, lesson_id: int, lesson_title: str, lesson_content: str, pass_s/", "language": "Python", "typeref": "typename:GeneratedQuiz", "kind": "member", "signature": "(self, lesson_id: int, lesson_title: str, lesson_content: str, pass_score: float = 70.0, difficulty: str = \"Beginner\")", "scope": "OpenAIQuizGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "questions", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/services/openai_quiz_service.py", "pattern": "/^    questions: List[QuizQuestion] = field(default_factory=list)$/", "language": "Python", "typeref": "typename:List[QuizQuestion]", "kind": "variable", "scope": "GeneratedQuiz", "scopeKind": "class"}], "hash": "c28f401103b0c9ea14ef07aaed8be4de", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/services/openai_quiz_service.py", "fields": [{"name": "DEFAULT_MODEL = os.getenv(\"OPENAI_MODEL\", \"gpt-4o-mini\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEFAULT_TIMEOUT = float(os.getenv(\"OPENAI_TIMEOUT_SECONDS\", \"20\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[QuizQuestion] questions", "scope": "GeneratedQuiz", "scopeKind": "class", "description": "unavailable"}]}