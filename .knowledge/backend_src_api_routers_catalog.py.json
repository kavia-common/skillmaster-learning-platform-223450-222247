{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing skills and lessons within a FastAPI web application. It includes endpoints for listing, retrieving, creating, updating, and deleting skills and lessons, with some endpoints restricted to admin users via JWT authentication. The routes interact with a MongoDB backend through a repository pattern, and include route documentation and input validation.", "external_files": ["src.api.auth", "src.db.models", "src.db.mongo", "src.repositories.mongo_repository"], "external_methods": ["require_admin", "get_db", "MongoCatalogRepository.list_skills", "MongoCatalogRepository.get_skill_by_slug", "MongoCatalogRepository.create_skill", "MongoCatalogRepository.update_skill", "MongoCatalogRepository.delete_skill", "MongoCatalogRepository.list_lessons_for_skill", "MongoCatalogRepository.get_lesson_by_slug", "MongoCatalogRepository.create_lesson", "MongoCatalogRepository.update_lesson", "MongoCatalogRepository.delete_lesson"], "published": ["list_skills", "get_skill", "create_skill", "update_skill", "delete_skill", "list_lessons_for_skill", "get_lesson", "create_lesson", "update_lesson", "delete_lesson"], "classes": [{"name": "SkillModel", "description": "Pydantic model representing a skill."}, {"name": "LessonModel", "description": "Pydantic model representing a lesson."}, {"name": "QuizQuestionModel", "description": "Pydantic model representing a quiz question for validation."}], "methods": [{"name": "MongoCatalogRepository get_repo()", "description": "Creates and returns a MongoCatalogRepository instance, ensuring indexes are set.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] list_skills( category: Optional[str] = Query(None, description=\"Filter by category\"), difficulty: Optional[str] = Query(None, description=\"Filter by difficulty\"), page: int = Query(1, ge=1, description=\"Page number\"), page_size: int = Query(20, ge=1, le=100, description=\"Items per page\"), search: Optional[str] = Query(None, description=\"Search term against name/description/tags\"), repo: MongoCatalogRepository = Depends(get_repo), )", "description": "Handles GET request to list skills with optional filters and pagination.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] get_skill(slug: str, repo: MongoCatalogRepository = Depends(get_repo))", "description": "Handles GET request to retrieve a single skill by slug.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] create_skill(payload: SkillModel, repo: MongoCatalogRepository = Depends(get_repo))", "description": "Handles POST request to create a new skill; restricted to admins.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] update_skill( slug: str, updates: Dict[str, Any], repo: MongoCatalogRepository = Depends(get_repo) )", "description": "Handles PUT request to update an existing skill by slug; restricted to admins.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] delete_skill(slug: str, repo: MongoCatalogRepository = Depends(get_repo))", "description": "Handles DELETE request to remove a skill by slug; restricted to admins.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] list_lessons_for_skill(slug: str, repo: MongoCatalogRepository = Depends(get_repo))", "description": "Handles GET request to list lessons associated with a skill.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] get_lesson(slug: str, repo: MongoCatalogRepository = Depends(get_repo))", "description": "Handles GET request to retrieve a lesson by slug.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] create_lesson(payload: LessonModel, repo: MongoCatalogRepository = Depends(get_repo))", "description": "Handles POST request to create a new lesson; restricted to admins.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] update_lesson( slug: str, updates: Dict[str, Any], repo: MongoCatalogRepository = Depends(get_repo) )", "description": "Handles PUT request to update a lesson by slug; validates quiz questions.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] delete_lesson(slug: str, repo: MongoCatalogRepository = Depends(get_repo))", "description": "Handles DELETE request to remove a lesson by slug; restricted to admins.", "scope": "", "scopeKind": ""}], "calls": ["get_db", "require_admin", "MongoCatalogRepository.ensure_indexes", "MongoCatalogRepository.list_skills", "MongoCatalogRepository.get_skill_by_slug", "MongoCatalogRepository.create_skill", "MongoCatalogRepository.update_skill", "MongoCatalogRepository.delete_skill", "MongoCatalogRepository.list_lessons_for_skill", "MongoCatalogRepository.get_lesson_by_slug", "MongoCatalogRepository.create_lesson", "MongoCatalogRepository.update_lesson", "MongoCatalogRepository.delete_lesson"], "search-terms": ["catalog routes", "skills management", "lessons endpoints", "MongoDB skill repository", "FastAPI skill routes", "admin-only skill endpoints", "lesson CRUD API"], "state": 2, "file_id": 24, "knowledge_revision": 62, "git_revision": "d6098fa8e57823041338944baf99a4e23adf6358", "revision_history": [{"53": ""}, {"62": "d6098fa8e57823041338944baf99a4e23adf6358"}], "ctags": [{"_type": "tag", "name": "create_lesson", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def create_lesson(payload: LessonModel, repo: MongoCatalogRepository = Depends(get_repo)) /", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(payload: LessonModel, repo: MongoCatalogRepository = Depends(get_repo))"}, {"_type": "tag", "name": "create_skill", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def create_skill(payload: SkillModel, repo: MongoCatalogRepository = Depends(get_repo)) ->/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(payload: SkillModel, repo: MongoCatalogRepository = Depends(get_repo))"}, {"_type": "tag", "name": "delete_lesson", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def delete_lesson(slug: str, repo: MongoCatalogRepository = Depends(get_repo)) -> Dict[str/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(slug: str, repo: MongoCatalogRepository = Depends(get_repo))"}, {"_type": "tag", "name": "delete_skill", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def delete_skill(slug: str, repo: MongoCatalogRepository = Depends(get_repo)) -> Dict[str,/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(slug: str, repo: MongoCatalogRepository = Depends(get_repo))"}, {"_type": "tag", "name": "get_lesson", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def get_lesson(slug: str, repo: MongoCatalogRepository = Depends(get_repo)) -> Dict[str, A/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(slug: str, repo: MongoCatalogRepository = Depends(get_repo))"}, {"_type": "tag", "name": "get_repo", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def get_repo() -> MongoCatalogRepository:$/", "language": "Python", "typeref": "typename:MongoCatalogRepository", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_skill", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def get_skill(slug: str, repo: MongoCatalogRepository = Depends(get_repo)) -> Dict[str, An/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(slug: str, repo: MongoCatalogRepository = Depends(get_repo))"}, {"_type": "tag", "name": "list_lessons_for_skill", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def list_lessons_for_skill(slug: str, repo: MongoCatalogRepository = Depends(get_repo)) ->/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(slug: str, repo: MongoCatalogRepository = Depends(get_repo))"}, {"_type": "tag", "name": "list_skills", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def list_skills($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( category: Optional[str] = Query(None, description=\"Filter by category\"), difficulty: Optional[str] = Query(None, description=\"Filter by difficulty\"), page: int = Query(1, ge=1, description=\"Page number\"), page_size: int = Query(20, ge=1, le=100, description=\"Items per page\"), search: Optional[str] = Query(None, description=\"Search term against name/description/tags\"), repo: MongoCatalogRepository = Depends(get_repo), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^router = APIRouter(prefix=\"\\/content\", tags=[\"Skills\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_lesson", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def update_lesson($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( slug: str, updates: Dict[str, Any], repo: MongoCatalogRepository = Depends(get_repo) )"}, {"_type": "tag", "name": "update_skill", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/routers/catalog.py", "pattern": "/^async def update_skill($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( slug: str, updates: Dict[str, Any], repo: MongoCatalogRepository = Depends(get_repo) )"}], "hash": "0efae1d2017215f268e48ecb1d3e9637", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routers/catalog.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/content\", tags=[\"Skills\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}