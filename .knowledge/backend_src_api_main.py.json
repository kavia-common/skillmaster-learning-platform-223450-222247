{"is_source_file": true, "format": "Python", "description": "Main FastAPI application setup script for the SkillMaster backend API. It initializes the FastAPI app, configures middleware, defines startup and shutdown routines, includes route modules, and sets up error handling. It also provides some health check and developer help endpoints.", "external_files": ["src.api.errors", "src.api.routers", "src.api.routes", "src.config", "src.repositories.memory_repository", "src.db.mongo", "src.db.table_init", "src.seeds.seed_initial_content", "src.db.sqlalchemy", "src.seeds.run_all_seeds"], "external_methods": ["application_error_handler", "generic_error_handler", "get_config", "init_mongo", "close_mongo", "create_all_tables", "seed_initial_content", "get_session_factory", "run_all_seeds"], "published": ["app", "health_check", "backend_help", "run_seeds_endpoint"], "classes": [], "methods": [{"name": "None _on_startup()", "description": "Startup event handler that checks dependencies, initiates database connections, creates tables, and optionally seeds data.", "scope": "", "scopeKind": ""}, {"name": "None _on_shutdown()", "description": "Shutdown event handler that closes database connections.", "scope": "", "scopeKind": ""}, {"name": "HTMLResponse backend_help()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JSONResponse run_seeds_endpoint()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fastapi.FastAPI", "app.add_middleware", "CORSMiddleware", "app.include_router", "app.add_exception_handler", "print", "os.getenv", "import sqlalchemy", "import psycopg2", "init_mongo", "close_mongo", "create_all_tables", "seed_initial_content", "run_all_seeds"], "search-terms": ["SkillMaster Backend", "FastAPI", "OpenAPI", "CORS", "Mongo", "seeding", "database initialization", "error handling", "routers", "health check", "development help"], "state": 2, "file_id": 2, "knowledge_revision": 127, "git_revision": "9c0ccc404e74674862b23b05489847a6ea98712a", "revision_history": [{"8": "ce6e8ae0d644a5826db0eb64347e845d3559ef91"}, {"18": "ce6e8ae0d644a5826db0eb64347e845d3559ef91"}, {"35": "f27748b7437ac3a5cc92c00ec44dfbd895df6bd8"}, {"54": "09db09ee8e492447d94e28561b265a33e387b39e"}, {"87": "d6098fa8e57823041338944baf99a4e23adf6358"}, {"94": "9e18404ff8058c7c23684759224b553db5bb4552"}, {"98": "9e18404ff8058c7c23684759224b553db5bb4552"}, {"108": "4716309fec40729cf6071447aadea012f3c6a404"}, {"120": "3a10c163cc49dafb46e52903500f1bb09866dd04"}, {"125": "9c0ccc404e74674862b23b05489847a6ea98712a"}, {"126": "9c0ccc404e74674862b23b05489847a6ea98712a"}, {"127": "9c0ccc404e74674862b23b05489847a6ea98712a"}], "ctags": [{"_type": "tag", "name": "_on_shutdown", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^async def _on_shutdown() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_on_startup", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^async def _on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "allow_origins", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^allow_origins = []$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "allow_origins", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^allow_origins = sorted({o.rstrip(\"\\/\") for o in allow_origins if o})$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "backend_help", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^def backend_help() -> HTMLResponse:$/", "language": "Python", "typeref": "typename:HTMLResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "catalog_router", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^from src.api.routers import catalog as catalog_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:catalog"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^config = get_config()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^def health_check() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "lessons_router", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^from src.api.routers import lessons as lessons_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:lessons"}, {"_type": "tag", "name": "progress_router", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^from src.api.routers import progress as progress_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:progress"}, {"_type": "tag", "name": "progressive_skills_router", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^from src.api.routers.skill_progressive import router as progressive_skills_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "relational_router", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^from src.api.routes import relational as relational_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:relational"}, {"_type": "tag", "name": "repositories", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^repositories = {\"default\": InMemoryRepository()}$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "run_seeds_endpoint", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^def run_seeds_endpoint() -> JSONResponse:$/", "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "skills_router", "path": "/home/kavia/workspace/code-generation/skillmaster-learning-platform-223450-222247/backend/src/api/main.py", "pattern": "/^from src.api.routers import skills as skills_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:skills"}], "hash": "9adf325db9f24903383a63f822b6ebc5", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/main.py", "fields": [{"name": "allow_origins = []", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "allow_origins = sorted({o.rstrip(\"\\/\") for o in allow_origins if o})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "config = get_config()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "repositories = {\"default\": InMemoryRepository()}", "scope": "", "scopeKind": "", "description": "unavailable"}]}